(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dd1c37f"],{"0485":function(e,t,n){"use strict";n("74d5")},1919:function(e,t,n){"use strict";var i={getMeshFromMeshs(e,t){var n=null;return e.forEach(e=>{e.name==t&&(n=e)}),n},getMeshSize(e){const t=e.getHierarchyBoundingVectors(),n={x:t.max.x-t.min.x,y:t.max.y-t.min.y,z:t.max.z-t.min.z};return n}};t["a"]=i},"22d0":function(e,t,n){"use strict";n.r(t);var i=n("8336"),o=n("132d"),a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%",width:"100%"}},[t(i["a"],{directives:[{name:"show",rawName:"v-show",value:!e.show3Dcanvans,expression:"!show3Dcanvans"}],staticStyle:{padding:"10px 20px 5px 20px",position:"absolute",right:"10px",top:"10px"},attrs:{icon:"",color:"#505781"},on:{click:function(t){e.show3Dcanvans=!e.show3Dcanvans}}},[t(o["a"],[e._v("mdi-equal-box")])],1),t("div",{directives:[{name:"window",rawName:"v-window",value:e.windowParams,expression:"windowParams"},{name:"show",rawName:"v-show",value:e.show3Dcanvans,expression:"show3Dcanvans"}],attrs:{id:"window1"}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{id:"header"}},[t("div",{staticClass:"header"},[e._v("仿真 ")]),t(i["a"],{staticStyle:{padding:"10px 20px 5px 20px"},attrs:{icon:"",color:"white"},on:{click:function(t){e.show3Dcanvans=!e.show3Dcanvans}}},[t(o["a"],[e._v("mdi-close")])],1)],1),e._m(0)]),t("div",{staticStyle:{display:"flex","justify-content":"space-around",width:"680px"}},[t("div",[t("label",[e._v("alpha:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("alpha",Math.PI/10)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("alpha",-Math.PI/10)}}},[e._v("- ")])]),t("div",[t("label",[e._v("beta:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("beta",Math.PI/10)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("beta",-Math.PI/10)}}},[e._v("- ")])]),t("div",[t("label",[e._v("radius:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("radius",Math.PI)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("radius",-Math.PI)}}},[e._v("- ")])])])],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"z-index":"10001","padding-left":"10px"}},[t("canvas",{attrs:{id:"renderCanvas"}})])}],r=n("633b"),l=n("dd4a"),c=n("6fcd"),d=n("8681"),u=n.n(d),h=n("1919");const p="http://localhost:8088/static/simulator/";var m=null,g=null,v=null,w=null,f=null,b=null,C=null,y=null,M=new r["Vector3"](0,0,0);const I=.5,x=.5,_=.9,A=.8,P=.5;let T=null,O=!1;async function L(){m=U(),B(),await G(),F(),await S(),D(),V(),setTimeout(()=>{k()},1e3),setTimeout((function(){console.log(v.alpha,v.beta,v.radius),N(-1.5649881922490174,0,68.84955592153878)}),1500),E()}function E(){var e=c["AdvancedDynamicTexture"].CreateFullscreenUI("btnsUI",!0,m),t=c["Button"].CreateImageOnlyButton("but",p+"restart.png");t.height="60px",t.width="60px",t.thickness=0,t.horizontalAlignment=c["Control"].HORIZONTAL_ALIGNMENT_RIGHT,t.verticalAlignment=c["Control"].VERTICAL_ALIGNMENT_BOTTOM,t.top="-20px",t.left="-20px",t.onPointerClickObservable.add((function(){console.log("重启引擎")})),T=new c["Rectangle"]("speedSelect"),T.height="110px",T.width="60px",T.horizontalAlignment=c["Control"].HORIZONTAL_ALIGNMENT_LEFT,T.verticalAlignment=c["Control"].VERTICAL_ALIGNMENT_BOTTOM,T.top="-90px",T.left="20px",T.thickness=3,T.color="#505781",T.background="white",T.cornerRadius=15,T.isVisible=!1;var n=c["Button"].CreateImageOnlyButton("slowlyBtn",p+"turtle.png");n.width="30px",n.height="30px",n.thickness=0,n.verticalAlignment=c["Control"].VERTICAL_ALIGNMENT_TOP,n.top=15,n.onPointerClickObservable.add((function(){console.log("slowImg click"),s.source=p+"turtle.png",console.log("设置移动速度：1"),T.isVisible=!1}));var i=c["Button"].CreateImageOnlyButton("fastBtn",p+"rabbit.png");i.width="30px",i.height="30px",i.thickness=0,i.verticalAlignment=c["Control"].VERTICAL_ALIGNMENT_BOTTOM,i.top=-15,i.onPointerClickObservable.add((function(){console.log("fastImg click"),s.source=p+"rabbit.png",console.log("设置移动速度：6"),T.isVisible=!1})),T.addControl(n),T.addControl(i);var o=new c["Button"]("speedBtn");o.height="60px",o.width="60px",o.horizontalAlignment=c["Control"].HORIZONTAL_ALIGNMENT_LEFT,o.verticalAlignment=c["Control"].VERTICAL_ALIGNMENT_BOTTOM,o.top="-20px",o.left="20px",o.thickness=0,o.onPointerClickObservable.add((function(){T.isVisible=!T.isVisible,T.isVisible&&(O=!0)}));var a=new c["Ellipse"];a.width="60px",a.height="60px",a.color="#505781",a.thickness=3,a.background="white";var s=new c["Image"]("currentSpeedBtn",p+"turtle.png");s.width="30px",s.height="30px",s.thickness=0,o.addControl(a),o.addControl(s),e.addControl(t),e.addControl(o),e.addControl(T)}function N(e,t,n){let i=new r["Animation"]("animCam","alpha",30,r["Animation"].ANIMATIONTYPE_FLOAT,r["Animation"].ANIMATIONLOOPMODE_CONSTANT),o=0,a=100,s=[];s.push({frame:o,value:v.alpha}),s.push({frame:a,value:e}),i.setKeys(s);let l=new r["Animation"]("animCam","beta",30,r["Animation"].ANIMATIONTYPE_FLOAT,r["Animation"].ANIMATIONLOOPMODE_CONSTANT),c=[];c.push({frame:o,value:v.beta}),c.push({frame:a,value:t}),l.setKeys(c);let d=new r["Animation"]("animCam","radius",30,r["Animation"].ANIMATIONTYPE_FLOAT,r["Animation"].ANIMATIONLOOPMODE_CONSTANT),u=[];u.push({frame:o,value:v.radius}),u.push({frame:a,value:n}),d.setKeys(u),v.animations.push(i,l,d),m.beginAnimation(v,o,a,!1,6,()=>{console.log("camera")})}function k(){g.hideLoadingUI(),document.getElementById("customLoadingScreenDiv").remove()}function B(){r["DefaultLoadingScreen"].prototype.displayLoadingUI=function(){this._loadingDiv=document.createElement("div"),this._loadingDiv.id="customLoadingScreenDiv",this._loadingDiv.style.background="#505781",this._loadingDiv.style.zIndex="10006",this._loadingDiv.style.height="100%";var e=new Image;e.src=p+"loading.gif",e.style.padding="15%",e.style.paddingTop="30%",this._loadingDiv.appendChild(e),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),this._loadingDiv.style.left="10px",this._loadingDiv.style.top="39px";let t=document.getElementById("window1"),n=document.getElementById("header");t.insertBefore(this._loadingDiv,n)},g.displayLoadingUI()}async function S(){const e=await u()();console.log("Ammo",e),m.enablePhysics(new r["Vector3"](0,-10,0),new r["AmmoJSPlugin"](!0,e)),m.onReadyObservable.add((function(){console.log(m.getPhysicsEngine()._physicsPlugin.bjsAMMO.btDefaultCollisionConfiguration()),console.log(m.getPhysicsEngine()._physicsPlugin._collisionConfiguration),console.log(m.getPhysicsEngine()._physicsPlugin._dispatcher),console.log(m.getPhysicsEngine()._physicsPlugin._solver),console.log(m.getPhysicsEngine()._physicsPlugin.world)}))}function D(){w.physicsImpostor=new r["PhysicsImpostor"](w,r["PhysicsImpostor"].BoxImpostor,{mass:0,restitution:P,friction:A},m);var e=h["a"].getMeshFromMeshs(C,"Glass_Plane.006");console.log("robotBody",e);var t=h["a"].getMeshSize(e),n=50;const i=n/10;var o=z(C,m,i,t);C=o}function z(e,t,n,i){var o=new r["Mesh"]("robot",t);e.forEach(e=>{null==e.parent&&o.addChild(e)}),o.getChildMeshes().forEach(e=>{e.scaling.x=Math.abs(e.scaling.x),e.scaling.y=Math.abs(e.scaling.y),e.scaling.z=Math.abs(e.scaling.z),e.physicsImpostor=new r["PhysicsImpostor"](e,r["PhysicsImpostor"].BoxImpostor,{mass:.1},t)}),o.scaling.scaleInPlace(n),o.physicsImpostor=new r["PhysicsImpostor"](o,r["PhysicsImpostor"].NoImpostor,{mass:I,friction:x,restitution:_},t);const a=-i.y/1.1;return o.physicsImpostor.setDeltaPosition(new r["Vector3"](0,a,0)),o.position.subtractInPlace(new r["Vector3"](0,-a,0)),o}function V(){var e=1;const t=e/10;y=new r["TransformNode"]("cubes");const n=80*t;var i=R(m,"cube",n);i.position._y+=n/2,i.position._x-=100,i.material=new r["StandardMaterial"]("amaterial",m),i.material.diffuseColor=new r["Color3"](16/255,156/255,73/255),y[0]=i;var o=R(m,"cube2",n);o.position._y+=n/2,o.position._x-=100,o.position._z+=2*n,o.material=new r["StandardMaterial"]("amaterial",m),o.material.diffuseColor=new r["Color3"](48/255,.4,150/255),y[1]=o;var a=R(m,"cube3",n);a.position._y+=n/2,a.position._x-=100,a.position._z-=2*n,a.material=new r["StandardMaterial"]("amaterial",m),a.material.diffuseColor=new r["Color3"](199/255,88/255,93/255),y[2]=a;let s=new r["ActionManager"](m);i.actionManager=s,o.actionManager=s,a.actionManager=s;var l=new r["HighlightLayer"]("hl1",m);s.registerAction(new r["ExecuteCodeAction"](r["ActionManager"].OnPointerOverTrigger,(function(e){var t=e.meshUnderPointer.id;t==i.name?l.addMesh(i,r["Color3"].White()):t==o.name?l.addMesh(o,r["Color3"].White()):t==a.name&&l.addMesh(a,r["Color3"].White())}))),s.registerAction(new r["ExecuteCodeAction"](r["ActionManager"].OnPointerOutTrigger,(function(e){var t=e.meshUnderPointer.id;t==i.name?l.removeMesh(i):t==o.name?l.removeMesh(o):t==a.name&&l.removeMesh(a)}))),m.freezeMaterials()}function R(e,t,n){let i=.25,o=.5,a=.5;const s=n,l=3.1*s/2,c=r["MeshBuilder"].CreateSphere("sphere",{diameter:l,segments:16},e),d=r["Mesh"].CreateBox("box",s,e),u=r["CSG"].FromMesh(d).intersect(r["CSG"].FromMesh(c));c.dispose(),d.dispose();const h=u.toMesh(t,new r["StandardMaterial"]("roundedBoxMaterial",e),e);return h.draggable=!0,h.physicsImpostor=new r["PhysicsImpostor"](h,r["PhysicsImpostor"].BoxImpostor,{mass:i,restitution:o,friction:a}),h.material.freeze(),h.material.specularColor=new r["Color3"](0,0,0),h.freezeWorldMatrix(),h}function F(){var e,t=g.getRenderingCanvas(),n=function(){var e=m.pick(m.pointerX,m.pointerY,(function(e){return e==f||e==w}));return e.hit?e.pickedPoint:null},i=function(i){if(0===i.button){var o=m.pick(m.pointerX,m.pointerY,(function(e){return e!==f&&e!==w&&e!==b}));o.hit&&(e=o.pickedMesh,null==e.parent?console.log("no parent"):e.parent.name==C.name&&(e=e.parent),console.log("currentMesh",e),M=n(i),M&&setTimeout((function(){v.detachControl(t)}),0))}},o=function(t){if(M&&e){var i=n(t);if(i){console.log("startingPoint",M);var o=i.subtract(M);console.log("diff",o),e.position.addInPlace(o),console.log("currentMesh.name",e.name),M=i}}},a=function(){if(O&&(O=!1,T.isVisible=!1),M)return v.attachControl(t,!0),void(M=null)};t.addEventListener("pointerdown",i,!1),t.addEventListener("pointerup",a,!1),t.addEventListener("pointermove",o,!1)}async function G(){console.log("initRobot");const e="http://localhost:8088/static/model/",t="sportcar.babylon";var n=await r["SceneLoader"].ImportMeshAsync(null,e,t,m),i=n.meshes;console.log("meshes",i),C=i}function U(){var e=document.getElementById("renderCanvas");g=new r["Engine"](e,!0);var t=new r["Scene"](g);g.runRenderLoop((function(){t.render()})),window.addEventListener("resize",(function(){g.resize()})),v=new r["ArcRotateCamera"]("Camera",0,0,0,new r["Vector3"](0,0,0),t),v.alpha=1.1383885512243588,v.beta=1.3642551964995249,v.radius=50,v.upperBetaLimit=1.5,v.lowerRadiusLimit=50,v.upperRadiusLimit=1500,v.wheelPrecision=1,v.pinchPrecision=20,t.activeCamera.panningSensibility=100,v.attachControl(e,!0);var n=new r["HemisphericLight"]("light1",new r["Vector3"](0,10,0),t);n.specular=new r["Color3"](0,0,0),n.intensity=1;var i=new r["StandardMaterial"]("texturePlane",t);i.diffuseColor=new r["Color3"](152/255,209/255,115/255),i.backFaceCulling=!1,i.freeze(),w=r["MeshBuilder"].CreateDisc("ground",{radius:3e3},t),w.rotation.x=Math.PI/2,w.material=i,w.position.y=-.1,w.freezeWorldMatrix();const o=144;f=r["Mesh"].CreateGround("ground",o,o,1,t,!0);var a=new l["GridMaterial"]("grid",t);a.mainColor=r["Color3"].White(),a.alpha=1;const s=.95;a.lineColor=new r["Color3"](s,s,s),a.backFaceCulling=!0,a.majorUnitFrequency=16,a.minorUnitVisibility=0;const c=8;a.gridOffset=new r["Vector3"](c,0,c),a.freeze(),f.material=a,f.freezeWorldMatrix();var d=new l["SkyMaterial"]("skyMaterial",t);return d.inclination=0,d.backFaceCulling=!1,b=r["Mesh"].CreateBox("skyBox",5e3,t),b.material=d,t}var H={name:"test",data(){return{show3Dcanvans:!0,windowParams:{movable:!0,resizable:!1}}},async mounted(){await L()},methods:{setCameraPosition(e,t){switch(console.log(e,t),e){case"alpha":v.alpha+=t;break;case"beta":v.beta+=t;break;case"radius":v.radius+=t;break}let{alpha:n,beta:i,radius:o}=v;console.log(`更改后的值:${n},${i},${o}`)}}},W=H,j=(n("0485"),n("2877")),Y=Object(j["a"])(W,a,s,!1,null,"0cb9da79",null);t["default"]=Y.exports},"74d5":function(e,t,n){}}]);
//# sourceMappingURL=chunk-7dd1c37f.1cd68bca.js.map