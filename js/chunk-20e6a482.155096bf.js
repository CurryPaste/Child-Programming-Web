(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20e6a482"],{1919:function(e,n,i){"use strict";var t={getMeshFromMeshs(e,n){var i=null;return e.forEach(e=>{e.name==n&&(i=e)}),i},getMeshSize(e){const n=e.getHierarchyBoundingVectors(),i={x:n.max.x-n.min.x,y:n.max.y-n.min.y,z:n.max.z-n.min.z};return i}};n["a"]=t},"49d3":function(e,n,i){"use strict";i("b5a2")},b5a2:function(e,n,i){},c381:function(e,n,i){"use strict";i.r(n);var t=function(){var e=this;e._self._c;return e._m(0)},o=[function(){var e=this,n=e._self._c;return n("div",{staticStyle:{height:"100%",width:"100%"}},[n("div",[n("canvas",{attrs:{id:"renderCanvas"}})])])}],a=i("633b"),r=i("dd4a"),s=i("8681"),l=i.n(s),c=i("1919"),d=null,u=null,h=null,g=null,m=null,p=null,f=null,y=null,v=new a["Vector3"](0,0,0);const w=.5,M=.5,C=.9,b=.8,P=.5;async function I(){d=A(),x(),await k(),B(),await z(),L(),S(),setTimeout(()=>{_()},1e3)}function _(){u.hideLoadingUI(),document.getElementById("customLoadingScreenDiv").remove()}function x(){const e="http://localhost:8088/static/simulator/";a["DefaultLoadingScreen"].prototype.displayLoadingUI=function(){if(document.getElementById("customLoadingScreenDiv"))document.getElementById("customLoadingScreenDiv").style.display="initial";else{this._loadingDiv=document.createElement("div"),this._loadingDiv.id="customLoadingScreenDiv",this._loadingDiv.style.background="#505781",this._loadingDiv.style.height="100%",this._loadingDiv.style.width="700px",this._loadingDiv.style.alignContent="center",this._loadingDiv.style.zIndex="10006";var n=new Image;n.src=e+"loading.gif",n.style.padding="15%",n.style.paddingTop="30%",this._loadingDiv.appendChild(n),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),document.body.appendChild(this._loadingDiv)}},u.displayLoadingUI()}async function z(){const e=await l()();console.log("Ammo",e),d.enablePhysics(new a["Vector3"](0,-10,0),new a["AmmoJSPlugin"](!0,e)),d.onReadyObservable.add((function(){console.log(d.getPhysicsEngine()._physicsPlugin.bjsAMMO.btDefaultCollisionConfiguration()),console.log(d.getPhysicsEngine()._physicsPlugin._collisionConfiguration),console.log(d.getPhysicsEngine()._physicsPlugin._dispatcher),console.log(d.getPhysicsEngine()._physicsPlugin._solver),console.log(d.getPhysicsEngine()._physicsPlugin.world)}))}function L(){g.physicsImpostor=new a["PhysicsImpostor"](g,a["PhysicsImpostor"].BoxImpostor,{mass:0,restitution:P,friction:b},d);var e=c["a"].getMeshFromMeshs(f,"Glass_Plane.006");console.log("robotBody",e);var n=c["a"].getMeshSize(e),i=50;const t=i/10;var o=E(f,d,t,n);f=o}function E(e,n,i,t){var o=new a["Mesh"]("robot",n);o.position.y-=2,e.forEach(e=>{null==e.parent&&o.addChild(e)}),o.getChildMeshes().forEach(e=>{e.scaling.x=Math.abs(e.scaling.x),e.scaling.y=Math.abs(e.scaling.y),e.scaling.z=Math.abs(e.scaling.z),e.physicsImpostor=new a["PhysicsImpostor"](e,a["PhysicsImpostor"].BoxImpostor,{mass:.1},n)}),o.scaling.scaleInPlace(i),o.physicsImpostor=new a["PhysicsImpostor"](o,a["PhysicsImpostor"].NoImpostor,{mass:w,friction:M,restitution:C},n);const r=-t.y/1.1;return o.physicsImpostor.setDeltaPosition(new a["Vector3"](0,r,0)),o.position.subtractInPlace(new a["Vector3"](0,-r,0)),o}function S(){var e=1;const n=e/10;y=new a["TransformNode"]("cubes");const i=80*n;var t=D(d,"cube",i);t.position._y+=i/2,t.position._x-=100,t.material=new a["StandardMaterial"]("amaterial",d),t.material.diffuseColor=new a["Color3"](16/255,156/255,73/255),y[0]=t;var o=D(d,"cube2",i);o.position._y+=i/2,o.position._x-=100,o.position._z+=2*i,o.material=new a["StandardMaterial"]("amaterial",d),o.material.diffuseColor=new a["Color3"](48/255,.4,150/255),y[1]=o;var r=D(d,"cube3",i);r.position._y+=i/2,r.position._x-=100,r.position._z-=2*i,r.material=new a["StandardMaterial"]("amaterial",d),r.material.diffuseColor=new a["Color3"](199/255,88/255,93/255),y[2]=r;let s=new a["ActionManager"](d);t.actionManager=s,o.actionManager=s,r.actionManager=s;var l=new a["HighlightLayer"]("hl1",d);s.registerAction(new a["ExecuteCodeAction"](a["ActionManager"].OnPointerOverTrigger,(function(e){var n=e.meshUnderPointer.id;n==t.name?l.addMesh(t,a["Color3"].White()):n==o.name?l.addMesh(o,a["Color3"].White()):n==r.name&&l.addMesh(r,a["Color3"].White())}))),s.registerAction(new a["ExecuteCodeAction"](a["ActionManager"].OnPointerOutTrigger,(function(e){var n=e.meshUnderPointer.id;n==t.name?l.removeMesh(t):n==o.name?l.removeMesh(o):n==r.name&&l.removeMesh(r)}))),d.freezeMaterials()}function D(e,n,i,t=.25,o=.5,r=.5){const s=i,l=3.1*s/2,c=a["MeshBuilder"].CreateSphere("sphere",{diameter:l,segments:16},e),d=a["Mesh"].CreateBox("box",s,e),u=a["CSG"].FromMesh(d).intersect(a["CSG"].FromMesh(c));c.dispose(),d.dispose();const h=u.toMesh(n,new a["StandardMaterial"]("roundedBoxMaterial",e),e);return h.draggable=!0,h.physicsImpostor=new a["PhysicsImpostor"](h,a["PhysicsImpostor"].BoxImpostor,{mass:t,restitution:o,friction:r}),h.material.freeze(),h.material.specularColor=new a["Color3"](0,0,0),h.freezeWorldMatrix(),h}function B(){var e,n=u.getRenderingCanvas(),i=function(){var e=d.pick(d.pointerX,d.pointerY,(function(e){return e==m||e==g}));return e.hit?e.pickedPoint:null},t=function(t){if(0===t.button){var o=d.pick(d.pointerX,d.pointerY,(function(e){return e!==m&&e!==g&&e!==p}));console.log("pickInfo",o),o.hit&&(e=o.pickedMesh,null==e.parent?console.log("no parent"):e.parent.name==f.name&&(e=e.parent),console.log("currentMesh",e),v=i(t),v&&setTimeout((function(){h.detachControl(n)}),0))}},o=function(n){if(v&&e){var t=i(n);if(t){console.log("startingPoint",v);var o=t.subtract(v);console.log("diff",o),e.position.addInPlace(o),console.log("currentMesh.name",e.name),v=t}}},a=function(){if(v)return h.attachControl(n,!0),void(v=null)};n.addEventListener("pointerdown",t,!1),n.addEventListener("pointerup",a,!1),n.addEventListener("pointermove",o,!1)}async function k(){console.log("initRobot");const e="http://localhost:8088/static/model/",n="sportcar.babylon";var i=await a["SceneLoader"].ImportMeshAsync(null,e,n,d),t=i.meshes;console.log("meshes",t),f=t}function A(){var e=document.getElementById("renderCanvas");u=new a["Engine"](e,!0);var n=new a["Scene"](u);u.runRenderLoop((function(){n.render()})),window.addEventListener("resize",(function(){u.resize()})),h=new a["ArcRotateCamera"]("Camera",0,0,5,new a["Vector3"](0,0,10),n),h.setPosition(new a["Vector3"](-50,50,50)),h.upperBetaLimit=1.5,h.lowerRadiusLimit=50,h.upperRadiusLimit=1500,h.wheelPrecision=1,h.pinchPrecision=20,n.activeCamera.panningSensibility=100,h.attachControl(e,!0);var i=new a["HemisphericLight"]("light1",new a["Vector3"](0,10,0),n);i.specular=new a["Color3"](0,0,0),i.intensity=1;var t=new a["StandardMaterial"]("texturePlane",n);t.diffuseColor=new a["Color3"](152/255,209/255,115/255),t.backFaceCulling=!1,t.freeze(),g=a["MeshBuilder"].CreateDisc("ground",{radius:3e3},n),g.rotation.x=Math.PI/2,g.material=t,g.position.y=-.1,g.freezeWorldMatrix();const o=144;m=a["Mesh"].CreateGround("ground",o,o,1,n,!0);var s=new r["GridMaterial"]("grid",n);s.mainColor=a["Color3"].White(),s.alpha=1;const l=.95;s.lineColor=new a["Color3"](l,l,l),s.backFaceCulling=!0,s.majorUnitFrequency=16,s.minorUnitVisibility=0;const c=8;s.gridOffset=new a["Vector3"](c,0,c),s.freeze(),m.material=s,m.freezeWorldMatrix();var d=new r["SkyMaterial"]("skyMaterial",n);return d.inclination=0,d.backFaceCulling=!1,p=a["Mesh"].CreateBox("skyBox",5e3,n),p.material=d,n}var V={name:"test",data(){return{}},async mounted(){await I()}},U=V,F=(i("49d3"),i("2877")),O=Object(F["a"])(U,t,o,!1,null,"b1aa3b4e",null);n["default"]=O.exports}}]);
//# sourceMappingURL=chunk-20e6a482.155096bf.js.map