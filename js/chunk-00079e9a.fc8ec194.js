(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00079e9a"],{1919:function(e,t,n){"use strict";var i={getMeshFromMeshs(e,t){var n=null;return e.forEach(e=>{e.name==t&&(n=e)}),n},getMeshSize(e){const t=e.getHierarchyBoundingVectors(),n={x:t.max.x-t.min.x,y:t.max.y-t.min.y,z:t.max.z-t.min.z};return n}};t["a"]=i},4418:function(e,t,n){},d28d:function(e,t,n){"use strict";n("4418")},d65c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%",width:"100%"}},[e._m(0),t("div",{staticStyle:{display:"flex","justify-content":"space-around",width:"680px"}},[t("div",[t("label",[e._v("alpha:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("alpha",Math.PI/10)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("alpha",-Math.PI/10)}}},[e._v("- ")])]),t("div",[t("label",[e._v("beta:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("beta",Math.PI/10)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("beta",-Math.PI/10)}}},[e._v("- ")])]),t("div",[t("label",[e._v("radius:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("radius",Math.PI)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("radius",-Math.PI)}}},[e._v("- ")])])])])},a=[function(){var e=this,t=e._self._c;return t("div",[t("canvas",{attrs:{id:"renderCanvas"}})])}],o=n("633b"),s=n("dd4a"),r=n("8681"),l=n.n(r),c=n("1919"),u=null,d=null,h=null,m=null,p=null,g=null,f=null,v=null,y=new o["Vector3"](0,0,0);const b=.5,C=.5,M=.9,w=.8,P=.5;async function I(){u=D(),x(),await z(),k(),await O(),L(),S(),setTimeout(()=>{A()},1e3),setTimeout((function(){console.log(h.alpha,h.beta,h.radius),_(-1.5649881922490174,0,68.84955592153878)}),1500)}function _(e,t,n){let i=new o["Animation"]("animCam","alpha",30,o["Animation"].ANIMATIONTYPE_FLOAT,o["Animation"].ANIMATIONLOOPMODE_CONSTANT),a=0,s=100,r=[];r.push({frame:a,value:h.alpha}),r.push({frame:s,value:e}),i.setKeys(r);let l=new o["Animation"]("animCam","beta",30,o["Animation"].ANIMATIONTYPE_FLOAT,o["Animation"].ANIMATIONLOOPMODE_CONSTANT),c=[];c.push({frame:a,value:h.beta}),c.push({frame:s,value:t}),l.setKeys(c);let d=new o["Animation"]("animCam","radius",30,o["Animation"].ANIMATIONTYPE_FLOAT,o["Animation"].ANIMATIONLOOPMODE_CONSTANT),m=[];m.push({frame:a,value:h.radius}),m.push({frame:s,value:n}),d.setKeys(m),h.animations.push(i,l,d),u.beginAnimation(h,a,s,!1,6,()=>{console.log("camare")})}function A(){d.hideLoadingUI(),document.getElementById("customLoadingScreenDiv").remove()}function x(){const e="http://localhost:8088/static/simulator/";o["DefaultLoadingScreen"].prototype.displayLoadingUI=function(){if(document.getElementById("customLoadingScreenDiv"))document.getElementById("customLoadingScreenDiv").style.display="initial";else{this._loadingDiv=document.createElement("div"),this._loadingDiv.id="customLoadingScreenDiv",this._loadingDiv.style.background="#505781",this._loadingDiv.style.height="100%",this._loadingDiv.style.width="700px",this._loadingDiv.style.alignContent="center",this._loadingDiv.style.zIndex="10006";var t=new Image;t.src=e+"loading.gif",t.style.padding="15%",t.style.paddingTop="30%",this._loadingDiv.appendChild(t),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),document.body.appendChild(this._loadingDiv)}},d.displayLoadingUI()}async function O(){const e=await l()();console.log("Ammo",e),u.enablePhysics(new o["Vector3"](0,-10,0),new o["AmmoJSPlugin"](!0,e)),u.onReadyObservable.add((function(){console.log(u.getPhysicsEngine()._physicsPlugin.bjsAMMO.btDefaultCollisionConfiguration()),console.log(u.getPhysicsEngine()._physicsPlugin._collisionConfiguration),console.log(u.getPhysicsEngine()._physicsPlugin._dispatcher),console.log(u.getPhysicsEngine()._physicsPlugin._solver),console.log(u.getPhysicsEngine()._physicsPlugin.world)}))}function L(){m.physicsImpostor=new o["PhysicsImpostor"](m,o["PhysicsImpostor"].BoxImpostor,{mass:0,restitution:P,friction:w},u);var e=c["a"].getMeshFromMeshs(f,"Glass_Plane.006");console.log("robotBody",e);var t=c["a"].getMeshSize(e),n=50;const i=n/10;var a=E(f,u,i,t);f=a}function E(e,t,n,i){var a=new o["Mesh"]("robot",t);e.forEach(e=>{null==e.parent&&a.addChild(e)}),a.getChildMeshes().forEach(e=>{e.scaling.x=Math.abs(e.scaling.x),e.scaling.y=Math.abs(e.scaling.y),e.scaling.z=Math.abs(e.scaling.z),e.physicsImpostor=new o["PhysicsImpostor"](e,o["PhysicsImpostor"].BoxImpostor,{mass:.1},t)}),a.scaling.scaleInPlace(n),a.physicsImpostor=new o["PhysicsImpostor"](a,o["PhysicsImpostor"].NoImpostor,{mass:b,friction:C,restitution:M},t);const s=-i.y/1.1;return a.physicsImpostor.setDeltaPosition(new o["Vector3"](0,s,0)),a.position.subtractInPlace(new o["Vector3"](0,-s,0)),a}function S(){var e=1;const t=e/10;v=new o["TransformNode"]("cubes");const n=80*t;var i=T(u,"cube",n);i.position._y+=n/2,i.position._x-=100,i.material=new o["StandardMaterial"]("amaterial",u),i.material.diffuseColor=new o["Color3"](16/255,156/255,73/255),v[0]=i;var a=T(u,"cube2",n);a.position._y+=n/2,a.position._x-=100,a.position._z+=2*n,a.material=new o["StandardMaterial"]("amaterial",u),a.material.diffuseColor=new o["Color3"](48/255,.4,150/255),v[1]=a;var s=T(u,"cube3",n);s.position._y+=n/2,s.position._x-=100,s.position._z-=2*n,s.material=new o["StandardMaterial"]("amaterial",u),s.material.diffuseColor=new o["Color3"](199/255,88/255,93/255),v[2]=s;let r=new o["ActionManager"](u);i.actionManager=r,a.actionManager=r,s.actionManager=r;var l=new o["HighlightLayer"]("hl1",u);r.registerAction(new o["ExecuteCodeAction"](o["ActionManager"].OnPointerOverTrigger,(function(e){var t=e.meshUnderPointer.id;t==i.name?l.addMesh(i,o["Color3"].White()):t==a.name?l.addMesh(a,o["Color3"].White()):t==s.name&&l.addMesh(s,o["Color3"].White())}))),r.registerAction(new o["ExecuteCodeAction"](o["ActionManager"].OnPointerOutTrigger,(function(e){var t=e.meshUnderPointer.id;t==i.name?l.removeMesh(i):t==a.name?l.removeMesh(a):t==s.name&&l.removeMesh(s)}))),u.freezeMaterials()}function T(e,t,n){let i=.25,a=.5,s=.5;const r=n,l=3.1*r/2,c=o["MeshBuilder"].CreateSphere("sphere",{diameter:l,segments:16},e),u=o["Mesh"].CreateBox("box",r,e),d=o["CSG"].FromMesh(u).intersect(o["CSG"].FromMesh(c));c.dispose(),u.dispose();const h=d.toMesh(t,new o["StandardMaterial"]("roundedBoxMaterial",e),e);return h.draggable=!0,h.physicsImpostor=new o["PhysicsImpostor"](h,o["PhysicsImpostor"].BoxImpostor,{mass:i,restitution:a,friction:s}),h.material.freeze(),h.material.specularColor=new o["Color3"](0,0,0),h.freezeWorldMatrix(),h}function k(){var e,t=d.getRenderingCanvas(),n=function(){var e=u.pick(u.pointerX,u.pointerY,(function(e){return e==p||e==m}));return e.hit?e.pickedPoint:null},i=function(i){if(0===i.button){var a=u.pick(u.pointerX,u.pointerY,(function(e){return e!==p&&e!==m&&e!==g}));console.log("pickInfo",a),a.hit&&(e=a.pickedMesh,null==e.parent?console.log("no parent"):e.parent.name==f.name&&(e=e.parent),console.log("currentMesh",e),y=n(i),y&&setTimeout((function(){h.detachControl(t)}),0))}},a=function(t){if(y&&e){var i=n(t);if(i){console.log("startingPoint",y);var a=i.subtract(y);console.log("diff",a),e.position.addInPlace(a),console.log("currentMesh.name",e.name),y=i}}},o=function(){if(y)return h.attachControl(t,!0),void(y=null)};t.addEventListener("pointerdown",i,!1),t.addEventListener("pointerup",o,!1),t.addEventListener("pointermove",a,!1)}async function z(){console.log("initRobot");const e="http://localhost:8088/static/model/",t="sportcar.babylon";var n=await o["SceneLoader"].ImportMeshAsync(null,e,t,u),i=n.meshes;console.log("meshes",i),f=i}function D(){var e=document.getElementById("renderCanvas");d=new o["Engine"](e,!0);var t=new o["Scene"](d);d.runRenderLoop((function(){t.render()})),window.addEventListener("resize",(function(){d.resize()})),h=new o["ArcRotateCamera"]("Camera",0,0,0,new o["Vector3"](0,0,0),t),h.alpha=1.1383885512243588,h.beta=1.3642551964995249,h.radius=50,h.upperBetaLimit=1.5,h.lowerRadiusLimit=50,h.upperRadiusLimit=1500,h.wheelPrecision=1,h.pinchPrecision=20,t.activeCamera.panningSensibility=100,h.attachControl(e,!0);var n=new o["HemisphericLight"]("light1",new o["Vector3"](0,10,0),t);n.specular=new o["Color3"](0,0,0),n.intensity=1;var i=new o["StandardMaterial"]("texturePlane",t);i.diffuseColor=new o["Color3"](152/255,209/255,115/255),i.backFaceCulling=!1,i.freeze(),m=o["MeshBuilder"].CreateDisc("ground",{radius:3e3},t),m.rotation.x=Math.PI/2,m.material=i,m.position.y=-.1,m.freezeWorldMatrix();const a=144;p=o["Mesh"].CreateGround("ground",a,a,1,t,!0);var r=new s["GridMaterial"]("grid",t);r.mainColor=o["Color3"].White(),r.alpha=1;const l=.95;r.lineColor=new o["Color3"](l,l,l),r.backFaceCulling=!0,r.majorUnitFrequency=16,r.minorUnitVisibility=0;const c=8;r.gridOffset=new o["Vector3"](c,0,c),r.freeze(),p.material=r,p.freezeWorldMatrix();var u=new s["SkyMaterial"]("skyMaterial",t);return u.inclination=0,u.backFaceCulling=!1,g=o["Mesh"].CreateBox("skyBox",5e3,t),g.material=u,t}var N={name:"test",data(){return{}},async mounted(){await I()},methods:{setCameraPosition(e,t){switch(console.log(e,t),e){case"alpha":h.alpha+=t;break;case"beta":h.beta+=t;break;case"radius":h.radius+=t;break}let{alpha:n,beta:i,radius:a}=h;console.log(`更改后的值:${n},${i},${a}`)}}},B=N,F=(n("d28d"),n("2877")),U=Object(F["a"])(B,i,a,!1,null,"4c1d9578",null);t["default"]=U.exports}}]);
//# sourceMappingURL=chunk-00079e9a.fc8ec194.js.map