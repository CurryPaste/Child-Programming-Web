(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0740c53c"],{1919:function(e,t,n){"use strict";var i={getMeshFromMeshs(e,t){var n=null;return e.forEach(e=>{e.name==t&&(n=e)}),n},getMeshSize(e){const t=e.getHierarchyBoundingVectors(),n={x:t.max.x-t.min.x,y:t.max.y-t.min.y,z:t.max.z-t.min.z};return n}};t["a"]=i},"644a":function(e,t,n){"use strict";n("70f9")},"70f9":function(e,t,n){},da80:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%",width:"100%"}},[e._m(0),t("div",{staticStyle:{display:"flex","justify-content":"space-around",width:"680px"}},[t("div",[t("label",[e._v("alpha:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("alpha",Math.PI/10)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("alpha",-Math.PI/10)}}},[e._v("- ")])]),t("div",[t("label",[e._v("beta:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("beta",Math.PI/10)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("beta",-Math.PI/10)}}},[e._v("- ")])]),t("div",[t("label",[e._v("radius:")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("radius",Math.PI)}}},[e._v("+ ")]),t("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.setCameraPosition("radius",-Math.PI)}}},[e._v("- ")])])])])},o=[function(){var e=this,t=e._self._c;return t("div",[t("canvas",{attrs:{id:"renderCanvas"}})])}],a=n("633b"),s=n("dd4a"),r=n("6fcd"),l=n("8681"),c=n.n(l),u=n("1919");const d="http://localhost:8088/static/simulator/";var h=null,p=null,m=null,g=null,v=null,f=null,C=null,b=null,y=new a["Vector3"](0,0,0);const w=.5,M=.5,I=.9,A=.8,_=.5;let P=null,T=!1;async function x(){h=F(),N(),await R(),V(),await k(),B(),z(),setTimeout(()=>{E()},1e3),setTimeout((function(){console.log(m.alpha,m.beta,m.radius),L(-1.5649881922490174,0,68.84955592153878)}),1500),O()}function O(){var e=r["AdvancedDynamicTexture"].CreateFullscreenUI("btnsUI",!0,h),t=r["Button"].CreateImageOnlyButton("but",d+"restart.png");t.height="60px",t.width="60px",t.thickness=0,t.horizontalAlignment=r["Control"].HORIZONTAL_ALIGNMENT_RIGHT,t.verticalAlignment=r["Control"].VERTICAL_ALIGNMENT_BOTTOM,t.top="-20px",t.left="-20px",t.onPointerClickObservable.add((function(){console.log("重启引擎")})),P=new r["Rectangle"]("speedSelect"),P.height="110px",P.width="60px",P.horizontalAlignment=r["Control"].HORIZONTAL_ALIGNMENT_LEFT,P.verticalAlignment=r["Control"].VERTICAL_ALIGNMENT_BOTTOM,P.top="-90px",P.left="20px",P.thickness=3,P.color="#505781",P.background="white",P.cornerRadius=15,P.isVisible=!1;var n=r["Button"].CreateImageOnlyButton("slowlyBtn",d+"turtle.png");n.width="30px",n.height="30px",n.thickness=0,n.verticalAlignment=r["Control"].VERTICAL_ALIGNMENT_TOP,n.top=15,n.onPointerClickObservable.add((function(){console.log("slowImg click"),s.source=d+"turtle.png",console.log("设置移动速度：1"),P.isVisible=!1}));var i=r["Button"].CreateImageOnlyButton("fastBtn",d+"rabbit.png");i.width="30px",i.height="30px",i.thickness=0,i.verticalAlignment=r["Control"].VERTICAL_ALIGNMENT_BOTTOM,i.top=-15,i.onPointerClickObservable.add((function(){console.log("fastImg click"),s.source=d+"rabbit.png",console.log("设置移动速度：6"),P.isVisible=!1})),P.addControl(n),P.addControl(i);var o=new r["Button"]("speedBtn");o.height="60px",o.width="60px",o.horizontalAlignment=r["Control"].HORIZONTAL_ALIGNMENT_LEFT,o.verticalAlignment=r["Control"].VERTICAL_ALIGNMENT_BOTTOM,o.top="-20px",o.left="20px",o.thickness=0,o.onPointerClickObservable.add((function(){P.isVisible=!P.isVisible,P.isVisible&&(T=!0)}));var a=new r["Ellipse"];a.width="60px",a.height="60px",a.color="#505781",a.thickness=3,a.background="white";var s=new r["Image"]("currentSpeedBtn",d+"turtle.png");s.width="30px",s.height="30px",s.thickness=0,o.addControl(a),o.addControl(s),e.addControl(t),e.addControl(o),e.addControl(P)}function L(e,t,n){let i=new a["Animation"]("animCam","alpha",30,a["Animation"].ANIMATIONTYPE_FLOAT,a["Animation"].ANIMATIONLOOPMODE_CONSTANT),o=0,s=100,r=[];r.push({frame:o,value:m.alpha}),r.push({frame:s,value:e}),i.setKeys(r);let l=new a["Animation"]("animCam","beta",30,a["Animation"].ANIMATIONTYPE_FLOAT,a["Animation"].ANIMATIONLOOPMODE_CONSTANT),c=[];c.push({frame:o,value:m.beta}),c.push({frame:s,value:t}),l.setKeys(c);let u=new a["Animation"]("animCam","radius",30,a["Animation"].ANIMATIONTYPE_FLOAT,a["Animation"].ANIMATIONLOOPMODE_CONSTANT),d=[];d.push({frame:o,value:m.radius}),d.push({frame:s,value:n}),u.setKeys(d),m.animations.push(i,l,u),h.beginAnimation(m,o,s,!1,6,()=>{console.log("camera")})}function E(){p.hideLoadingUI(),document.getElementById("customLoadingScreenDiv").remove()}function N(){a["DefaultLoadingScreen"].prototype.displayLoadingUI=function(){if(document.getElementById("customLoadingScreenDiv"))document.getElementById("customLoadingScreenDiv").style.display="initial";else{this._loadingDiv=document.createElement("div"),this._loadingDiv.id="customLoadingScreenDiv",this._loadingDiv.style.background="#505781",this._loadingDiv.style.height="100%",this._loadingDiv.style.width="700px",this._loadingDiv.style.alignContent="center",this._loadingDiv.style.zIndex="10006";var e=new Image;e.src=d+"loading.gif",e.style.padding="15%",e.style.paddingTop="30%",this._loadingDiv.appendChild(e),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),document.body.appendChild(this._loadingDiv)}},p.displayLoadingUI()}async function k(){const e=await c()();console.log("Ammo",e),h.enablePhysics(new a["Vector3"](0,-10,0),new a["AmmoJSPlugin"](!0,e)),h.onReadyObservable.add((function(){console.log(h.getPhysicsEngine()._physicsPlugin.bjsAMMO.btDefaultCollisionConfiguration()),console.log(h.getPhysicsEngine()._physicsPlugin._collisionConfiguration),console.log(h.getPhysicsEngine()._physicsPlugin._dispatcher),console.log(h.getPhysicsEngine()._physicsPlugin._solver),console.log(h.getPhysicsEngine()._physicsPlugin.world)}))}function B(){g.physicsImpostor=new a["PhysicsImpostor"](g,a["PhysicsImpostor"].BoxImpostor,{mass:0,restitution:_,friction:A},h);var e=u["a"].getMeshFromMeshs(C,"Glass_Plane.006");console.log("robotBody",e);var t=u["a"].getMeshSize(e),n=50;const i=n/10;var o=S(C,h,i,t);C=o}function S(e,t,n,i){var o=new a["Mesh"]("robot",t);e.forEach(e=>{null==e.parent&&o.addChild(e)}),o.getChildMeshes().forEach(e=>{e.scaling.x=Math.abs(e.scaling.x),e.scaling.y=Math.abs(e.scaling.y),e.scaling.z=Math.abs(e.scaling.z),e.physicsImpostor=new a["PhysicsImpostor"](e,a["PhysicsImpostor"].BoxImpostor,{mass:.1},t)}),o.scaling.scaleInPlace(n),o.physicsImpostor=new a["PhysicsImpostor"](o,a["PhysicsImpostor"].NoImpostor,{mass:w,friction:M,restitution:I},t);const s=-i.y/1.1;return o.physicsImpostor.setDeltaPosition(new a["Vector3"](0,s,0)),o.position.subtractInPlace(new a["Vector3"](0,-s,0)),o}function z(){var e=1;const t=e/10;b=new a["TransformNode"]("cubes");const n=80*t;var i=D(h,"cube",n);i.position._y+=n/2,i.position._x-=100,i.material=new a["StandardMaterial"]("amaterial",h),i.material.diffuseColor=new a["Color3"](16/255,156/255,73/255),b[0]=i;var o=D(h,"cube2",n);o.position._y+=n/2,o.position._x-=100,o.position._z+=2*n,o.material=new a["StandardMaterial"]("amaterial",h),o.material.diffuseColor=new a["Color3"](48/255,.4,150/255),b[1]=o;var s=D(h,"cube3",n);s.position._y+=n/2,s.position._x-=100,s.position._z-=2*n,s.material=new a["StandardMaterial"]("amaterial",h),s.material.diffuseColor=new a["Color3"](199/255,88/255,93/255),b[2]=s;let r=new a["ActionManager"](h);i.actionManager=r,o.actionManager=r,s.actionManager=r;var l=new a["HighlightLayer"]("hl1",h);r.registerAction(new a["ExecuteCodeAction"](a["ActionManager"].OnPointerOverTrigger,(function(e){var t=e.meshUnderPointer.id;t==i.name?l.addMesh(i,a["Color3"].White()):t==o.name?l.addMesh(o,a["Color3"].White()):t==s.name&&l.addMesh(s,a["Color3"].White())}))),r.registerAction(new a["ExecuteCodeAction"](a["ActionManager"].OnPointerOutTrigger,(function(e){var t=e.meshUnderPointer.id;t==i.name?l.removeMesh(i):t==o.name?l.removeMesh(o):t==s.name&&l.removeMesh(s)}))),h.freezeMaterials()}function D(e,t,n){let i=.25,o=.5,s=.5;const r=n,l=3.1*r/2,c=a["MeshBuilder"].CreateSphere("sphere",{diameter:l,segments:16},e),u=a["Mesh"].CreateBox("box",r,e),d=a["CSG"].FromMesh(u).intersect(a["CSG"].FromMesh(c));c.dispose(),u.dispose();const h=d.toMesh(t,new a["StandardMaterial"]("roundedBoxMaterial",e),e);return h.draggable=!0,h.physicsImpostor=new a["PhysicsImpostor"](h,a["PhysicsImpostor"].BoxImpostor,{mass:i,restitution:o,friction:s}),h.material.freeze(),h.material.specularColor=new a["Color3"](0,0,0),h.freezeWorldMatrix(),h}function V(){var e,t=p.getRenderingCanvas(),n=function(){var e=h.pick(h.pointerX,h.pointerY,(function(e){return e==v||e==g}));return e.hit?e.pickedPoint:null},i=function(i){if(0===i.button){var o=h.pick(h.pointerX,h.pointerY,(function(e){return e!==v&&e!==g&&e!==f}));o.hit&&(e=o.pickedMesh,null==e.parent?console.log("no parent"):e.parent.name==C.name&&(e=e.parent),console.log("currentMesh",e),y=n(i),y&&setTimeout((function(){m.detachControl(t)}),0))}},o=function(t){if(y&&e){var i=n(t);if(i){console.log("startingPoint",y);var o=i.subtract(y);console.log("diff",o),e.position.addInPlace(o),console.log("currentMesh.name",e.name),y=i}}},a=function(){if(T&&(T=!1,P.isVisible=!1),y)return m.attachControl(t,!0),void(y=null)};t.addEventListener("pointerdown",i,!1),t.addEventListener("pointerup",a,!1),t.addEventListener("pointermove",o,!1)}async function R(){console.log("initRobot");const e="http://localhost:8088/static/model/",t="sportcar.babylon";var n=await a["SceneLoader"].ImportMeshAsync(null,e,t,h),i=n.meshes;console.log("meshes",i),C=i}function F(){var e=document.getElementById("renderCanvas");p=new a["Engine"](e,!0);var t=new a["Scene"](p);p.runRenderLoop((function(){t.render()})),window.addEventListener("resize",(function(){p.resize()})),m=new a["ArcRotateCamera"]("Camera",0,0,0,new a["Vector3"](0,0,0),t),m.alpha=1.1383885512243588,m.beta=1.3642551964995249,m.radius=50,m.upperBetaLimit=1.5,m.lowerRadiusLimit=50,m.upperRadiusLimit=1500,m.wheelPrecision=1,m.pinchPrecision=20,t.activeCamera.panningSensibility=100,m.attachControl(e,!0);var n=new a["HemisphericLight"]("light1",new a["Vector3"](0,10,0),t);n.specular=new a["Color3"](0,0,0),n.intensity=1;var i=new a["StandardMaterial"]("texturePlane",t);i.diffuseColor=new a["Color3"](152/255,209/255,115/255),i.backFaceCulling=!1,i.freeze(),g=a["MeshBuilder"].CreateDisc("ground",{radius:3e3},t),g.rotation.x=Math.PI/2,g.material=i,g.position.y=-.1,g.freezeWorldMatrix();const o=144;v=a["Mesh"].CreateGround("ground",o,o,1,t,!0);var r=new s["GridMaterial"]("grid",t);r.mainColor=a["Color3"].White(),r.alpha=1;const l=.95;r.lineColor=new a["Color3"](l,l,l),r.backFaceCulling=!0,r.majorUnitFrequency=16,r.minorUnitVisibility=0;const c=8;r.gridOffset=new a["Vector3"](c,0,c),r.freeze(),v.material=r,v.freezeWorldMatrix();var u=new s["SkyMaterial"]("skyMaterial",t);return u.inclination=0,u.backFaceCulling=!1,f=a["Mesh"].CreateBox("skyBox",5e3,t),f.material=u,t}var G={name:"test",data(){return{}},async mounted(){await x()},methods:{setCameraPosition(e,t){switch(console.log(e,t),e){case"alpha":m.alpha+=t;break;case"beta":m.beta+=t;break;case"radius":m.radius+=t;break}let{alpha:n,beta:i,radius:o}=m;console.log(`更改后的值:${n},${i},${o}`)}}},U=G,H=(n("644a"),n("2877")),W=Object(H["a"])(U,i,o,!1,null,"66544d95",null);t["default"]=W.exports}}]);
//# sourceMappingURL=chunk-0740c53c.c5c2c818.js.map